---
import type { HolidayCourse } from "@layouts/HolidayLayout/_types/holidayCourse";
import HolidayLayout from "@layouts/HolidayLayout/HolidayLayout.astro";
import { getCollection } from "astro:content";
import { _courses } from "./_data/courses.ts";
import BundleImage from "./_images/black-friday-bundle.png";

const __courses = await getCollection("courses");

const courses: HolidayCourse[] = _courses.map(({ category, courses }) => ({
  category: category,
  courses: courses.map((course) => ({
    id: __courses.find((_course) => _course.slug === course.id)!,
    prices: course.prices,
  })),
}));
---

<HolidayLayout
  annotation="Rock the JVM's annual offer you can't refuse"
  bundleImage={BundleImage}
  {courses}
  description="Everything on Rock the JVM at an outrageous price, available for a limited time"
  forcedTheme="black-friday"
  logoSuffix="-black-friday"
  subtitle1="50% off site-wide, valid until EOD Dec 2, 2024."
  subtitle2="Everything must go!"
  title="Black Friday"
/>
